<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æœ¬åˆ†æ®µæµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .segment {
            background: white;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
        }
        .segment-header {
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }
        .segment-text {
            color: #212529;
            line-height: 1.5;
        }
        .stats {
            background: #e7f3ff;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¤ æ–‡æœ¬åˆ†æ®µæµ‹è¯•å·¥å…·</h1>
        <p>æµ‹è¯•è¯­éŸ³åˆæˆçš„æ–‡æœ¬åˆ†æ®µåŠŸèƒ½ï¼Œå°†é•¿æ–‡æœ¬æ™ºèƒ½åˆ†å‰²ä¸ºé€‚åˆè¯­éŸ³åˆæˆçš„æ®µè½ã€‚</p>
        
        <div>
            <label for="inputText"><strong>è¾“å…¥æ–‡æœ¬ï¼š</strong></label>
            <textarea id="inputText" placeholder="è¯·è¾“å…¥è¦åˆ†æ®µçš„æ–‡æœ¬...">
ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ã€‚ä»Šå¤©å¤©æ°”çœŸä¸é”™ï¼Œé˜³å…‰æ˜åªšï¼Œå¾®é£å¾å¾ã€‚æˆ‘å¯ä»¥å¸®ä½ è§£ç­”å„ç§é—®é¢˜ï¼Œæ¯”å¦‚å­¦ä¹ ã€å·¥ä½œã€ç”Ÿæ´»ç­‰æ–¹é¢çš„ç–‘é—®ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆéœ€è¦å¸®åŠ©çš„åœ°æ–¹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚æˆ‘ä¼šå°½æˆ‘æ‰€èƒ½ä¸ºä½ æä¾›å‡†ç¡®ã€æœ‰ç”¨çš„ä¿¡æ¯å’Œå»ºè®®ã€‚è®©æˆ‘ä»¬ä¸€èµ·åº¦è¿‡æ„‰å¿«çš„æ—¶å…‰å§ï¼
            </textarea>
        </div>
        
        <div>
            <button onclick="testSegmentation()">ğŸ” å¼€å§‹åˆ†æ®µ</button>
            <button onclick="clearResults()">ğŸ—‘ï¸ æ¸…é™¤ç»“æœ</button>
            <button onclick="loadSampleText()">ğŸ“ åŠ è½½ç¤ºä¾‹æ–‡æœ¬</button>
        </div>
        
        <div id="results"></div>
    </div>

    <script type="module">
        // ç®€åŒ–ç‰ˆçš„æ–‡æœ¬åˆ†æ®µå™¨ï¼ˆç”¨äºæµ‹è¯•ï¼‰
        class SimpleTextSegmenter {
            constructor(options = {}) {
                this.maxSegmentLength = options.maxSegmentLength || 80;
                this.minSegmentLength = options.minSegmentLength || 8;
            }

            segmentText(text) {
                if (!text || typeof text !== 'string') {
                    return [];
                }

                const cleanedText = text.replace(/\s+/g, ' ').trim();
                if (cleanedText.length <= this.maxSegmentLength) {
                    return [cleanedText];
                }

                // æŒ‰æ ‡ç‚¹ç¬¦å·åˆ†æ®µ
                const punctuationRegex = /([ã€‚ï¼ï¼Ÿï¼›ï¼š\.\!\?\;\:])/g;
                const parts = cleanedText.split(punctuationRegex);
                const segments = [];
                
                for (let i = 0; i < parts.length; i += 2) {
                    const content = parts[i];
                    const punctuation = parts[i + 1] || '';
                    
                    if (content && content.trim()) {
                        segments.push((content + punctuation).trim());
                    }
                }

                // åˆå¹¶è¿‡çŸ­çš„æ®µè½
                const merged = [];
                let currentSegment = '';
                
                for (const segment of segments) {
                    const testSegment = currentSegment ? currentSegment + ' ' + segment : segment;
                    
                    if (testSegment.length <= this.maxSegmentLength) {
                        currentSegment = testSegment;
                    } else {
                        if (currentSegment) {
                            merged.push(currentSegment);
                        }
                        currentSegment = segment;
                    }
                }
                
                if (currentSegment) {
                    merged.push(currentSegment);
                }
                
                return merged.filter(segment => segment.trim().length > 0);
            }
        }

        const segmenter = new SimpleTextSegmenter({
            maxSegmentLength: 80,
            minSegmentLength: 8
        });

        window.testSegmentation = function() {
            const inputText = document.getElementById('inputText').value;
            const resultsDiv = document.getElementById('results');
            
            if (!inputText.trim()) {
                alert('è¯·è¾“å…¥è¦åˆ†æ®µçš„æ–‡æœ¬ï¼');
                return;
            }

            const segments = segmenter.segmentText(inputText);
            const lengths = segments.map(s => s.length);
            
            const stats = {
                totalSegments: segments.length,
                totalLength: lengths.reduce((sum, len) => sum + len, 0),
                averageLength: lengths.length > 0 ? (lengths.reduce((sum, len) => sum + len, 0) / lengths.length).toFixed(1) : 0,
                minLength: Math.min(...lengths),
                maxLength: Math.max(...lengths)
            };

            let html = `
                <div class="result">
                    <h3>ğŸ“Š åˆ†æ®µç»Ÿè®¡</h3>
                    <div class="stats">
                        <strong>æ€»æ®µæ•°ï¼š</strong>${stats.totalSegments} æ®µ<br>
                        <strong>æ€»å­—ç¬¦æ•°ï¼š</strong>${stats.totalLength} å­—ç¬¦<br>
                        <strong>å¹³å‡é•¿åº¦ï¼š</strong>${stats.averageLength} å­—ç¬¦<br>
                        <strong>æœ€çŸ­æ®µè½ï¼š</strong>${stats.minLength} å­—ç¬¦<br>
                        <strong>æœ€é•¿æ®µè½ï¼š</strong>${stats.maxLength} å­—ç¬¦
                    </div>
                    
                    <h3>ğŸ“ åˆ†æ®µç»“æœ</h3>
            `;

            segments.forEach((segment, index) => {
                html += `
                    <div class="segment">
                        <div class="segment-header">ç¬¬ ${index + 1} æ®µ (${segment.length} å­—ç¬¦)</div>
                        <div class="segment-text">${segment}</div>
                    </div>
                `;
            });

            html += '</div>';
            resultsDiv.innerHTML = html;
        };

        window.clearResults = function() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('inputText').value = '';
        };

        window.loadSampleText = function() {
            const sampleTexts = [
                "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ã€‚ä»Šå¤©å¤©æ°”çœŸä¸é”™ï¼Œé˜³å…‰æ˜åªšï¼Œå¾®é£å¾å¾ã€‚æˆ‘å¯ä»¥å¸®ä½ è§£ç­”å„ç§é—®é¢˜ï¼Œæ¯”å¦‚å­¦ä¹ ã€å·¥ä½œã€ç”Ÿæ´»ç­‰æ–¹é¢çš„ç–‘é—®ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆéœ€è¦å¸®åŠ©çš„åœ°æ–¹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚æˆ‘ä¼šå°½æˆ‘æ‰€èƒ½ä¸ºä½ æä¾›å‡†ç¡®ã€æœ‰ç”¨çš„ä¿¡æ¯å’Œå»ºè®®ã€‚è®©æˆ‘ä»¬ä¸€èµ·åº¦è¿‡æ„‰å¿«çš„æ—¶å…‰å§ï¼",
                "äººå·¥æ™ºèƒ½æŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œå®ƒå·²ç»æ·±å…¥åˆ°æˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚ä»æ™ºèƒ½æ‰‹æœºçš„è¯­éŸ³åŠ©æ‰‹ï¼Œåˆ°è‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œå†åˆ°åŒ»ç–—è¯Šæ–­ç³»ç»Ÿï¼ŒAIæŠ€æœ¯æ­£åœ¨æ”¹å˜ç€ä¸–ç•Œã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ€è€ƒAIå‘å±•å¸¦æ¥çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å°±ä¸šé—®é¢˜ã€éšç§ä¿æŠ¤ã€ç®—æ³•åè§ç­‰ã€‚åªæœ‰åœ¨æŠ€æœ¯è¿›æ­¥ä¸ç¤¾ä¼šè´£ä»»ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œæˆ‘ä»¬æ‰èƒ½çœŸæ­£å—ç›ŠäºAIæŠ€æœ¯çš„å‘å±•ã€‚",
                "æ˜¥å¤©æ¥äº†ï¼Œä¸‡ç‰©å¤è‹ã€‚å…¬å›­é‡Œçš„æ¨±èŠ±ç››å¼€ï¼Œç²‰è‰²çš„èŠ±ç“£åœ¨å¾®é£ä¸­è½»èˆã€‚å­©å­ä»¬åœ¨è‰åœ°ä¸Šå¥”è·‘å¬‰æˆï¼Œè€äººä»¬åœ¨å‡‰äº­é‡Œä¸‹æ£‹èŠå¤©ã€‚è¿™æ˜¯ä¸€ä¸ªå……æ»¡ç”Ÿæœºä¸æ´»åŠ›çš„å­£èŠ‚ï¼Œä¹Ÿæ˜¯æ–°çš„å¼€å§‹ã€‚è®©æˆ‘ä»¬çæƒœè¿™ç¾å¥½çš„æ—¶å…‰ï¼Œç”¨å¿ƒæ„Ÿå—å¤§è‡ªç„¶çš„é¦ˆèµ ã€‚"
            ];
            
            const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
            document.getElementById('inputText').value = randomText;
        };
    </script>
</body>
</html>
