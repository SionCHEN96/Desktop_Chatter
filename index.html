<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; connect-src 'self' http://localhost:* http://127.0.0.1:*;">
    <title>Desktop Chatter</title>
    <link rel="stylesheet" href="src/styles/styles.css">
    <script type="importmap">
        {
            "imports": {
                "three": "./node_modules/three/build/three.module.js",
                "three/examples/jsm/loaders/GLTFLoader.js": "./node_modules/three/examples/jsm/loaders/GLTFLoader.js",
                "three/examples/jsm/loaders/FBXLoader.js": "./node_modules/three/examples/jsm/loaders/FBXLoader.js",
                "three/examples/jsm/loaders/RGBELoader.js": "./node_modules/three/examples/jsm/loaders/RGBELoader.js",
                "three/examples/jsm/loaders/EXRLoader.js": "./node_modules/three/examples/jsm/loaders/EXRLoader.js",
                "three/examples/jsm/postprocessing/EffectComposer.js": "./node_modules/three/examples/jsm/postprocessing/EffectComposer.js",
                "three/examples/jsm/postprocessing/RenderPass.js": "./node_modules/three/examples/jsm/postprocessing/RenderPass.js",
                "three/examples/jsm/postprocessing/SSAOPass.js": "./node_modules/three/examples/jsm/postprocessing/SSAOPass.js",
                "three/examples/jsm/postprocessing/UnrealBloomPass.js": "./node_modules/three/examples/jsm/postprocessing/UnrealBloomPass.js",
                "three/examples/jsm/postprocessing/ShaderPass.js": "./node_modules/three/examples/jsm/postprocessing/ShaderPass.js",
                "three/examples/jsm/postprocessing/OutputPass.js": "./node_modules/three/examples/jsm/postprocessing/OutputPass.js",
                "three/examples/jsm/shaders/FXAAShader.js": "./node_modules/three/examples/jsm/shaders/FXAAShader.js",
                "three/examples/jsm/shaders/GammaCorrectionShader.js": "./node_modules/three/examples/jsm/shaders/GammaCorrectionShader.js",
                "@pixiv/three-vrm": "./node_modules/@pixiv/three-vrm/lib/three-vrm.module.js",
                "@pixiv/three-vrm-core": "./node_modules/@pixiv/three-vrm-core/lib/three-vrm-core.module.js"
            }
        }
    </script>
</head>

<body>
    <div class="chat-container">
        <div class="drag-handle"></div>

        <!-- 主要内容区域：左右布局 -->
        <div class="main-content">
            <!-- 左侧：3D模型容器 -->
            <div class="left-panel">
                <div id="character-container"></div>
            </div>

            <!-- 右侧：AI回复气泡容器 -->
            <div class="right-panel">
                <div id="chat-messages" class="chat-messages"></div>
            </div>
        </div>

        <!-- 左侧：可爱的粉色消息按钮 -->
        <div id="toggle-chat-button" class="toggle-chat-button">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 2H4C2.9 2 2 2.9 2 4V16C2 17.1 2.9 18 4 18H18L22 22V4C22 2.9 21.1 2 20 2Z" fill="#ffffff"
                    stroke="#ff1493" stroke-width="0.5" />
                <circle cx="8" cy="10" r="1" fill="#ff69b4" />
                <circle cx="12" cy="10" r="1" fill="#ff69b4" />
                <circle cx="16" cy="10" r="1" fill="#ff69b4" />
            </svg>
        </div>

        <!-- 可折叠的聊天表单 -->
        <form id="chat-form" class="chat-form collapsed">
            <input type="text" id="message-input" placeholder="和我聊聊吧~ ✨" autocomplete="off">
            <button type="submit">💌</button>
        </form>
    </div>
    <script type="module" src="src/renderer/renderer.js"></script>
</body>

</html>